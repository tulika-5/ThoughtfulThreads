<!-- Ratings Section -->
<div>
    <h4>Ratings</h4>
    <div>
        {% for rating in ratings %}
            <div>
                <strong>{{ rating.user.username }}:</strong>
                <span>{{ rating.rating }} stars</span>
                <p>{{ rating.opinion }}</p>
            </div>
        {% endfor %}
    </div>

    <h4>Leave a Rating</h4>
    <form action="{% url 'add_rating' url=post.url %}" method="post">  <!-- Use post.url instead of post.id -->
        {% csrf_token %}
        <div class="rating">
            <input type="number" name="rating" hidden>
            <i class='bx bx-star star' style="--i: 0;"></i>
            <i class='bx bx-star star' style="--i: 1;"></i>
            <i class='bx bx-star star' style="--i: 2;"></i>
            <i class='bx bx-star star' style="--i: 3;"></i>
            <i class='bx bx-star star' style="--i: 4;"></i>
        </div>
        <textarea name="opinion" cols="30" rows="5" placeholder="Your opinion..."></textarea>
        <div class="btn-group">
            <button type="submit" class="btn submit">Submit</button>
            <button type="button" class="btn cancel">Cancel</button>
        </div>
    </form>
</div>
<!-- End Ratings Section -->
